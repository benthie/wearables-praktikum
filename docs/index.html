<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>eyeDrops: \notitle</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="blur_100.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">eyeDrops
   &#160;<span id="projectnumber">v2.3</span>
   </div>
   <div id="projectbrief">A new approach to detecting eye blinks.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title"></div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1>Source code documentation</h1>
<p>This documentation describes the source code and some key functionalities of the eyeDrops Cocoa Application. All classes and files are commented very detailed and important modules are described in the following.</p>
<h2>Program structure</h2>
<ul>
<li><a class="el" href="interface_app_delegate.html" title="The App Delegate class. ">AppDelegate</a>: Main frame of the app that manages the status-icon, the menu and coordinates all the interaction between the other program parts.</li>
<li><a class="el" href="interface_b_l_e_device_manager.html" title="The Bluetooth low energy device manager. ">BLEDeviceManager</a>: Bluetooth connection and communication manager (singleton).</li>
<li><a class="el" href="interface_user_profile_manager.html" title="The user profile manager to read/write from XML file and manage the profiles. ">UserProfileManager</a>: The class that manages all the current user profiles (singleton).</li>
<li><a class="el" href="interface_blurred_window.html" title="The Blurred Window controller.. ">BlurredWindow</a>: Key class in order to get a blurry screen.</li>
<li><a class="el" href="interface_preferences_window_controller.html" title="The preferences window (controller). ">PreferencesWindowController</a>: The preferences window where the user can change the blurring and bluetooth settings and is also able to create, change or delete user profiles. Calibration procedures are started from within this window.</li>
<li><a class="el" href="interface_calibration_window_controller.html" title="The calibration window (controller). ">CalibrationWindowController</a>: The calibration window where the user can perform a calibration. The animation (<a class="el" href="interface_animation_view_controller.html" title="This class controlls the animation view. ">AnimationViewController</a>, <a class="el" href="interface_animation_view.html" title="This class takes care of the calibration animation. ">AnimationView</a>) is used to signalise when the user should blink. The calibration results are then presented in the two given plots (<a class="el" href="interface_sensor_data_view_controller.html" title="Sensor data view controller class class. ">SensorDataViewController</a>, <a class="el" href="interface_blink_prediction_view_controller.html" title="Blink data view controller class class. ">BlinkPredictionViewController</a>).</li>
<li><a class="el" href="interface_settings.html" title="The shared settings container. ">Settings</a>: The settings class (singleton) manages all the user settings. Any changes that will be made during runtime are automatically done on the instance’s variables. when closing the application, all settings will be saved to a file and reloaded at the next start up.</li>
</ul>
<h2>Bluetooth communication protocol</h2>
<p>The following figure 1 shows the connection states the BLE device manager will be in after certain events / actions. This is important in order to understand how the communication protocol between the RFDuino (wearable device) and the Mac works.</p>
<div class="image">
<img src="con-state-diagram-mac.png" alt="con-state-diagram-mac.png"/>
<div class="caption">
Figure 1: Connection state diagram on Mac side</div></div>
<p> Figure 2 shows the connection states the wearable (RFDuino) will be in after certain events / actions.</p>
<div class="image">
<img src="con-state-diagram-rfduino.png" alt="con-state-diagram-rfduino.png"/>
<div class="caption">
Figure 2: Connection state diagram on RFDuino side</div></div>
<p> A compact overview over all the defined and used messages is given in the <a class="el" href="_protocol_8h.html" title="Header file containing the communication protocol. ">Protocol.h</a>. This file is written from the Mac’s point of view, that is BLE_OUT_MESSAGE are the messages that the Mac sends to the wearable and BLE_IN_MESSAGE are the ones that the Mac will receive. On the wearable side the nomenclature is swapped, BLE_IN_MESSAGE are the ones that are defined as BLE_OUT_MESSAGE on the Mac and vice versa. </p>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
